
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Weather Dashboard</title>

<style>
body {
  font-family: Arial;
  background:#0f172a;
  color:white;
  text-align:center;
}

.card {
  background:#1e293b;
  padding:20px;
  margin:15px;
  border-radius:12px;
  display:inline-block;
  width:260px;
}
</style>
</head>

<body>

<h1>ğŸŒ¦ Weather Stations</h1>

<select id="dev">
  <option value="max1">max1</option>
  <option value="max2">max2</option>
  <option value="max3">max3</option>
  <option value="max4">max4</option>
</select>

<div id="out"></div>

<script>

async function load(){

  const dev = document.getElementById("dev").value;

  const r = await fetch(
    "/api/sensor?device=" + dev
  );

  const data = await r.json();
  if(data.length === 0){
    document.getElementById("out").innerHTML = "No data";
    return;
  }

  const d = data[data.length-1];

  document.getElementById("out").innerHTML = `
  <div class="card">
    ğŸŒ¡ Temp: ${d.temperture.toFixed(1)} Â°C<br>
    ğŸ’§ Humidity: ${d.humidity.toFixed(1)} %<br>
    â² Pressure: ${d.pressure.toFixed(1)} hPa<br>
    ğŸ’¨ Wind Speed: ${d.winds ?? d.winds === 0 ? d.winds : d.winds} m/s<br>
    ğŸ§­ Direction: ${d.windd}<br>
    ğŸ•’ ${d.time}
  </div>`;
}

document.getElementById("dev").onchange = load;

load();
setInterval(load, 5000);

</script>
</body>
</html>
